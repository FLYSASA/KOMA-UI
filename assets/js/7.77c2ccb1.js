(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{499:function(t,e,r){},501:function(t,e,r){"use strict";var n=r(499);r.n(n).a},503:function(t,e,r){"use strict";r(167);var n={name:"KomaButton",components:{"k-icon":r(500).a},props:{icon:{type:String,default:""},iconPosition:{type:String,default:"left",validator:function(t){return["left","right"].includes(t)}},loading:{type:Boolean,default:!1}}},o=(r(501),r(42)),i=Object(o.a)(n,(function(){var t,e=this,r=e.$createElement,n=e._self._c||r;return n("button",{staticClass:"koma-button",class:(t={},t["icon-"+e.iconPosition]=!0,t),on:{click:function(t){return e.$emit("click")}}},[e.loading?n("k-icon",{staticClass:"loading icon",attrs:{name:"loading"}}):e._e(),e._v(" "),e.icon&&!e.loading?n("k-icon",{staticClass:"icon",attrs:{name:e.icon}}):e._e(),e._v(" "),n("div",{staticClass:"content"},[e._t("default")],2)],1)}),[],!1,null,"6acacc07",null);e.a=i.exports},505:function(t,e,r){},511:function(t,e,r){"use strict";var n=r(505);r.n(n).a},512:function(t,e,r){"use strict";var n={name:"KomaInput",components:{"k-icon":r(500).a},props:{value:{type:String|Date},type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:String}},data:function(){return{}},computed:{},methods:{setRawValue:function(t){this.$refs.input.value=t}}},o=(r(511),r(42)),i=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"k-input-wrapper",class:{error:t.error}},[r("input",t._b({ref:"input",attrs:{disabled:t.disabled,readonly:t.readonly,type:t.type},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)},blur:function(e){return t.$emit("blur",e.target.value)},focus:function(e){return t.$emit("focus",e.target.value)},input:function(e){return t.$emit("input",e.target.value)}}},"input",t.$attrs,!1)),t._v(" "),t.error?[t.error?r("k-icon",{staticClass:"icon-error",attrs:{name:"error"}}):t._e(),t._v(" "),r("span",{staticClass:"errorMessage"},[t._v(t._s(t.error))])]:t._e()],2)}),[],!1,null,"057772ec",null);e.a=i.exports},552:function(t,e,r){},553:function(t,e,r){},643:function(t,e,r){"use strict";var n=r(552);r.n(n).a},644:function(t,e,r){"use strict";var n=r(553);r.n(n).a},698:function(t,e,r){"use strict";r.r(e);var n=r(503),o=r(512),i=(r(69),r(99),r(70),r(24),r(63)),a=r(29),s=r(65);function l(t,e){"object"!==Object(i.a)(t[e])&&(t[e]={})}var u=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,[{key:"validate",value:function(t,e){var r=this,n={};return e.forEach((function(e){var o=t[e.key];if(e.required){var i=r.required(o);if(i)return l(n,e.key),void(n[e.key].required=i)}Object.keys(e).filter((function(t){return"key"!==t&&"required"!==t})).forEach((function(t){if(!r[t])throw"不存在的校验器: ".concat(t);var i=r[t](o,e[t]);i&&(l(n,e.key),n[e.key][t]=i)}))})),n}},{key:"required",value:function(t){if(!t&&0!==t)return"必填"}},{key:"pattern",value:function(t,e){if("email"===e&&(e=/^.+@.+$/),!e.test(t))return"格式不正确"}},{key:"minLength",value:function(t,e){if(t.length<e)return"太短"}},{key:"maxLength",value:function(t,e){if(t.length>e)return"太长"}}],[{key:"add",value:function(e,r){t.prototype[e]=r}}]),t}();var c,d,m,p={name:"KomaForm",components:{},provide:function(){return{root:this}},props:{model:{type:Object,required:!0},rules:{type:Array}},data:function(){return{validator:new u,childItems:[],errors:{}}},watch:{model:{handler:function(t){this.checkError()},deep:!0}},created:function(){console.log(this.$attrs)},methods:{addItem:function(t){this.childItems.push(t)},checkError:(c=function(){var t=this,e=this.rules;this.errors=this.validator.validate(this.model,e),this.childItems.forEach((function(e){t.errors[e.prop]?e.error=t.errors[e.prop]:e.error={}}))},m=d||200,function(t){var e=this,r=t;c.id&&clearTimeout(c.id),c.id=setTimeout((function(){c.call(e,r)}),m)}),validate:function(t){this.checkError(),t(0===Object.keys(this.errors).length,this.errors)}}},f=r(42),v=Object(f.a)(p,(function(){var t=this.$createElement;return(this._self._c||t)("form",this._b({staticClass:"koma-form",on:{submit:function(t){t.preventDefault()}}},"form",this.$attrs,!1),[this._t("default")],2)}),[],!1,null,null,null).exports,h={name:"KomaFormItem",components:{},props:{label:{type:String,required:!0},prop:{type:String,required:!0}},data:function(){return{error:{}}},watch:{},inject:["root"],computed:{},created:function(){this.root.addItem(this)},methods:{}},k=(r(643),Object(f.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"koma-form-item"},[r("label",[t._v(t._s(t.label))]),t._v(" "),r("div",{staticClass:"controls"},[t._t("default"),t._v(" "),r("div",{staticClass:"error-text"},[t._v("\n      "+t._s(t.error&&Object.values(t.error)[0])+"\n    ")])],2)])}),[],!1,null,"3845b926",null).exports),b={name:"KomaDatePickerDemo",components:{demosComponent:r(502).default,"k-button":n.a,"k-input":o.a,"k-form":v,"k-form-item":k},props:{},data:function(){return{model:{email:"",password:""},rules:[{key:"email",pattern:"email",required:!0},{key:"password",minLength:6,required:!0}],codeStr1:'\n        <div class="form-wrapper">\n          <k-form class="form" :model="model" :rules="rules" ref="form">\n            <h1>登录</h1>\n            <k-form-item label="邮箱" prop="email">\n              <k-input type="text" v-model="model.email"></k-input>\n            </k-form-item>\n            <k-form-item label="密码" prop="password">\n              <k-input type="password" v-model="model.password"></k-input>\n            </k-form-item>\n            <div class="submit">\n              <k-button type="submit" @click="onSubmit">提交</k-button>\n            </div>\n          </k-form>\n        </div>\n\n        data() {\n          return {\n            model: {\n              email: \'\',\n              password: \'\'\n            },\n            rules: [\n              { key: \'email\', pattern: \'email\', required: true},\n              { key: \'password\', minLength: 6, required: true}\n            ],\n          }\n        },\n        methods: {\n          onSubmit () {\n            this.$refs[\'form\'].validate((valid, error)=>{\n              if(valid){\n                console.log(valid, error)\n              }\n            })\n          }\n        }\n        <style lang="less" scoped>\n          .form-wrapper{\n            padding: 20px;\n            width: 50%;\n            height: 300px;\n            border: 1px solid #eee;\n            border-radius: 4px;\n            ::after {\n              clear: both;\n              content:\'\';\n              display: block;\n            }\n            .submit {\n              float: right;\n            }\n          }\n        </style>\n      '}},methods:{onSubmit:function(){this.$refs.form.validate((function(t,e){t&&console.log(t,e)}))}}},y=(r(644),Object(f.a)(b,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper cascader-demo"},[r("demos-component",{attrs:{name:"基础用法",demokey:"0",description:"传入规则对表单进行提交验证。",codeStr:t.codeStr1},scopedSlots:t._u([{key:"code",fn:function(){return[r("div",{staticClass:"form-wrapper"},[r("k-form",{ref:"form",staticClass:"form",attrs:{model:t.model,rules:t.rules,autocomplete:"off"}},[r("h1",[t._v("登录")]),t._v(" "),r("k-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("k-input",{attrs:{type:"text"},model:{value:t.model.email,callback:function(e){t.$set(t.model,"email",e)},expression:"model.email"}})],1),t._v(" "),r("k-form-item",{attrs:{label:"密码",prop:"password"}},[r("k-input",{attrs:{type:"password"},model:{value:t.model.password,callback:function(e){t.$set(t.model,"password",e)},expression:"model.password"}})],1),t._v(" "),r("div",{staticClass:"submit"},[r("k-button",{attrs:{type:"submit"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)]},proxy:!0}])})],1)}),[],!1,null,"291d8f60",null));e.default=y.exports}}]);